(1) RunExperiment
		- Select folder
		- Adjust settings
		- Click run
		- Maximize window

		*** On other computer ***

		- Set up ThorImage and ThorSync
		- Start ThorSync
		- Start Image Capture (with trigger first selected)

		*** Back on your comptuer ***

		- Click 'Continue' on pop-up window

	RunExperiment will create StimulusConfig.txt and StimulusTimes.txt 
	in the selected folder.

	Copy files generated by ThorSync and ThorImage on to your computer
	in the same folder. For the analysis to work the following files
	must exist:
		Episode001.h5
		Experiment.xml
		Image_0001_0001.raw
		StimulusConfig.txt
		StimulusTimes.txt
		ThorRealTimeDataSettings.xml


(2) extractData(Folder)
	
	This extracts Roi data to the data file 'Folder'.mat and then
	analyses data and saves it to [Analysed 'Folder'].mat
	If something goes wrong in the second part, or for some reason
	you wish to re-analyse the data from the first part, you can use
	the same function with the format
		extractData3(header, ImageData)
	where header and ImageData are the two variables in 'Folder'.mat

	The final analysed data file will have the following variables

	header.
		FileName		The name you gave the experiment
		RoiCount		Number of ROI
		StimuliCount	Number of stimuli presented
		TimeLapse		Total experiment run time
		FPS				Capture speed
		Frames			Number of frames recorded
		Slices			Number of slices recorded

	AnalysedData.
		Times 			Time of each frame for each ROI
		dFF0			delta f over f for each ROI at each frame
		RoiCoords		Coordinates of each ROI

	RoiData(n).
		Brightness		Brightness profile of Roi n
		Coordinates 	Coordinates of Roi n
		AutoCorrelation	Coefficient to determine responsiveness/whiteness of signal
		XCor			Average response of ROI to each stimulus

	StimulusData.
		Raw 			3 x n matrix. First column is simply the
						count 1 through n. The second column is
						the time of that stimulus. The third column
						is a description of the stimulus, which is 
						different for each stimulus type.
		Times 			A copy of the second column of the raw data
		Configuration.
			StimuluiCount		Number of different stimuli presented
			Repetitions			Number of repetitions
			Type				Stimulus type. Use stimType.m to decode
			DisplayLength		Length of stimulus
			RestLength			Pause between stimuli
			PlusMinus			Amplitude of up-down from grey background
			Number				Number of stimuli per repetition
			Height				Height of display window
			Width				Width of display window
			BottomPad			Verticle offset of display area
			Area 				Size of display area
			Background 			Shade of background between 0 and 1
		Responses		Correlation between responses and stimulus


	*** Detailed Description of Analaysis

	PART 1
	1. Get experimental parameters from Experiment.xml
	2. Import the ImageJ libraries so MATLAB can use ImageJ functions
	3. Project all images on top of each other to get clear picture of 
		structure
	4. Use ImageJ libraries to analyse image; white top hat convolution, threshold, 
		watershed, remove outliers, and then use Analyze Particles
	5. Get coordinates of each ROI, defined as the mean of all points 
		defining the ROI
	6. Calculate the mean pixel value of the largest circumscribed rectangle at each 
		frame for each ROI, giving us ROI-oriented t-profile
	7. Save extracted ROI data
	
	PART 2
	1. Read StimulusTimes.txt and StimulusConfig.txt
	2. Get frame times with ThorLabs-provided algorithm
	3. Calculate dF/F
	4. Set frame times from step 2 as time axis
	5. Adjust StimulusTimes by first frame time to synchronize
	6. Calculate cross correlation between stimuli and dFF
	7. Save analysed data


